{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst galleryGrid = document.querySelector('.gallery-grid');\nconst loader = document.querySelector('.loader');\n\nlet gallery = new SimpleLightbox('.gallery-grid a', {\n  captionsData: 'alt',\n});\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  galleryGrid.innerHTML = '';\n\n  showLoader();\n\n  const inputValue = event.target.elements.query.value.trim();\n\n  if (!inputValue) {\n    // galleryGrid.innerHTML = '';\n    iziToast.error({\n      message: 'Search field is empty',\n      position: 'topRight',\n    });\n    hideLoader();\n    return;\n  }\n\n  getImagesByInputValue(inputValue)\n    .then(data => {\n      if (data?.hits?.length) {\n        hideLoader();\n        createMarkupByHits(data.hits);\n        return;\n      }\n      throw Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    })\n    .catch(error => {\n      iziToast.info({\n        message:\n          typeof error === 'string' ? error : 'Something went wrong, sorry!',\n        position: 'topRight',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n\n  event.target.reset();\n}\n\nfunction showLoader() {\n  loader.style.display = 'inline-block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction getImagesByInputValue(q) {\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const paramsStrQuery = new URLSearchParams({\n    key: '42157668-d969611c6fdd34526589fe987',\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safeSearch: true,\n  });\n\n  const PARAMS = `?${paramsStrQuery}`;\n  const url = BASE_URL + PARAMS;\n  showLoader();\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\nfunction createMarkupByHits(hits) {\n  galleryGrid.innerHTML = '';\n\n  const galleryItem = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<a href=\"${largeImageURL}\" class=\"gallery-card\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" >\n      <div class=\"img-details-box\">\n      <p class=\"detail-item\"><b>Likes:</b> ${likes}</p>\n      <p class=\"detail-item\"><b>Views:</b> ${views}</p>\n      <p class=\"detail-item\"><b>Comments:</b> ${comments}</p>\n      <p class=\"detail-item\"><b>Downloads:</b> ${downloads}</p></div>\n      </a>`;\n      }\n    )\n    .join('');\n\n  galleryGrid.insertAdjacentHTML('beforeend', galleryItem);\n\n  gallery.refresh();\n}\n"],"names":["form","galleryGrid","loader","gallery","SimpleLightbox","handleSubmit","event","showLoader","inputValue","iziToast","hideLoader","getImagesByInputValue","data","_a","createMarkupByHits","error","q","BASE_URL","PARAMS","url","response","hits","galleryItem","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAU,IAAIC,EAAe,kBAAmB,CAClD,aAAc,KAChB,CAAC,EAEDJ,EAAK,iBAAiB,SAAUK,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpBL,EAAY,UAAY,GAExBM,IAEA,MAAMC,EAAaF,EAAM,OAAO,SAAS,MAAM,MAAM,OAErD,GAAI,CAACE,EAAY,CAEfC,EAAS,MAAM,CACb,QAAS,wBACT,SAAU,UAChB,CAAK,EACDC,IACA,MACD,CAEDC,EAAsBH,CAAU,EAC7B,KAAKI,GAAQ,OACZ,IAAIC,EAAAD,GAAA,YAAAA,EAAM,OAAN,MAAAC,EAAY,OAAQ,CACtBH,IACAI,EAAmBF,EAAK,IAAI,EAC5B,MACD,CACD,MAAM,MACJ,0EACR,CACA,CAAK,EACA,MAAMG,GAAS,CACdN,EAAS,KAAK,CACZ,QACE,OAAOM,GAAU,SAAWA,EAAQ,+BACtC,SAAU,UAClB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbL,GACN,CAAK,EAEHJ,EAAM,OAAO,OACf,CAEA,SAASC,GAAa,CACpBL,EAAO,MAAM,QAAU,cACzB,CAEA,SAASQ,GAAa,CACpBR,EAAO,MAAM,QAAU,MACzB,CAEA,SAASS,EAAsBK,EAAG,CAChC,MAAMC,EAAW,2BAUXC,EAAS,IARQ,IAAI,gBAAgB,CACzC,IAAK,qCACL,EAAAF,EACA,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,CAEgC,GAC3BG,EAAMF,EAAWC,EACvB,OAAAX,IACO,MAAMY,CAAG,EAAE,KAAKC,GAAY,CACjC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAASN,EAAmBO,EAAM,CAChCpB,EAAY,UAAY,GAExB,MAAMqB,EAAcD,EACjB,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe,YAAYL,CAAa;AAAA,kBACtBD,CAAY,UAAUE,CAAI;AAAA;AAAA,6CAECC,CAAK;AAAA,6CACLC,CAAK;AAAA,gDACFC,CAAQ;AAAA,iDACPC,CAAS;AAAA,WAGrD,EACA,KAAK,EAAE,EAEV5B,EAAY,mBAAmB,YAAaqB,CAAW,EAEvDnB,EAAQ,QAAO,CACjB"}
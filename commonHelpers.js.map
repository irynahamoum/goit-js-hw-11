{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst galleryGrid = document.querySelector('.gallery-grid');\nconst loader = document.querySelector('.loader');\n\nlet gallery = new SimpleLightbox('.gallery-grid a', {\n  captionsData: 'alt',\n});\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  const inputValue = event.target.elements.query.value.trim();\n\n  if (!inputValue) {\n    galleryGrid.innerHTML = '';\n    iziToast.error({\n      message: 'Search field is empty',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  loader.style.display = 'inline-block';\n\n  getImagesByInputValue(inputValue)\n    .then(data => {\n      if (data?.hits?.length > 0) {\n        loader.style.display = 'none';\n        createMarkupByHits(data.hits);\n        return;\n      }\n      throw Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    })\n    .catch(error => {\n      iziToast.info({\n        message:\n          typeof error === 'string' ? error : 'Something went wrong, sorry!',\n        position: 'topRight',\n      });\n    });\n\n  event.target.reset();\n}\n\nfunction getImagesByInputValue(q) {\n  const paramsStrQuery = new URLSearchParams({\n    key: '42157668-d969611c6fdd34526589fe987',\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safeSearch: true,\n  });\n\n  const PARAMS = `?${paramsStrQuery}`;\n  const url = BASE_URL + PARAMS;\n  loader.style.display = 'inline-block';\n  return fetch(url).then(response => response.json());\n}\n\nfunction createMarkupByHits(hits) {\n  galleryGrid.innerHTML = '';\n\n  const galleryItem = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<a href=\"${largeImageURL}\" class=\"gallery-card\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" >\n      <div class=\"img-details-box\">\n      <p class=\"detail-item\"><b>Likes:</b> ${likes}</p>\n      <p class=\"detail-item\"><b>Views:</b> ${views}</p>\n      <p class=\"detail-item\"><b>Comments:</b> ${comments}</p>\n      <p class=\"detail-item\"><b>Downloads:</b> ${downloads}</p></div>\n      </a>`;\n      }\n    )\n    .join('');\n\n  galleryGrid.insertAdjacentHTML('beforeend', galleryItem);\n\n  gallery.refresh();\n}\n"],"names":["form","galleryGrid","loader","gallery","SimpleLightbox","BASE_URL","handleSubmit","event","inputValue","iziToast","getImagesByInputValue","data","_a","createMarkupByHits","error","q","PARAMS","url","response","hits","galleryItem","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAU,IAAIC,EAAe,kBAAmB,CAClD,aAAc,KAChB,CAAC,EAED,MAAMC,EAAW,2BAEjBL,EAAK,iBAAiB,SAAUM,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAaD,EAAM,OAAO,SAAS,MAAM,MAAM,OAErD,GAAI,CAACC,EAAY,CACfP,EAAY,UAAY,GACxBQ,EAAS,MAAM,CACb,QAAS,wBACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDP,EAAO,MAAM,QAAU,eAEvBQ,EAAsBF,CAAU,EAC7B,KAAKG,GAAQ,OACZ,KAAIC,EAAAD,GAAA,YAAAA,EAAM,OAAN,YAAAC,EAAY,QAAS,EAAG,CAC1BV,EAAO,MAAM,QAAU,OACvBW,EAAmBF,EAAK,IAAI,EAC5B,MACD,CACD,MAAM,MACJ,0EACR,CACA,CAAK,EACA,MAAMG,GAAS,CACdL,EAAS,KAAK,CACZ,QACE,OAAOK,GAAU,SAAWA,EAAQ,+BACtC,SAAU,UAClB,CAAO,CACP,CAAK,EAEHP,EAAM,OAAO,OACf,CAEA,SAASG,EAAsBK,EAAG,CAShC,MAAMC,EAAS,IARQ,IAAI,gBAAgB,CACzC,IAAK,qCACL,EAAAD,EACA,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,CAEgC,GAC3BE,EAAMZ,EAAWW,EACvB,OAAAd,EAAO,MAAM,QAAU,eAChB,MAAMe,CAAG,EAAE,KAAKC,GAAYA,EAAS,KAAI,CAAE,CACpD,CAEA,SAASL,EAAmBM,EAAM,CAChClB,EAAY,UAAY,GAExB,MAAMmB,EAAcD,EACjB,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe,YAAYL,CAAa;AAAA,kBACtBD,CAAY,UAAUE,CAAI;AAAA;AAAA,6CAECC,CAAK;AAAA,6CACLC,CAAK;AAAA,gDACFC,CAAQ;AAAA,iDACPC,CAAS;AAAA,WAGrD,EACA,KAAK,EAAE,EAEV1B,EAAY,mBAAmB,YAAamB,CAAW,EAEvDjB,EAAQ,QAAO,CACjB"}